(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[104],{13e3:function(q,P,e){"use strict";e.r(P),e.d(P,{default:function(){return w}});var _=e(71194),R=e(50146),ee=e(57663),L=e(71577),ae=e(62350),$=e(75443),re=e(12968),B=e(38629),j=e(57337),C=e(8870),ne=e(34792),f=e(48086),F=e(3182),D=e(94043),d=e.n(D),M=e(51042),S=e(67294),N=e(4743),O=e(80569),te=e(43185),z=e(65488),ue=e(77576),G=e(85979),le=e(9715),p=e(92080),se=e(47673),E=e(4107),Z=e(36571),r=e(85893),K=void 0,W=E.Z.TextArea,H=function(t){var s=p.Z.useForm(),i=(0,j.Z)(s,1),l=i[0],a=t.values,U=a.imgSourceUrl,T=a.enable,x=function(){return[{uid:"1",name:"\u8F6E\u64AD\u56FE",status:"done",url:U}]};t.isUpdate?l.setFieldsValue((0,C.Z)({},t.values)):l.setFieldsValue({imgSourceUrl:void 0,name:void 0,jumpUrl:void 0,id:void 0,enable:void 0});var g=function(){return!0},A=function(){var o=(0,F.Z)(d().mark(function c(){var I;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,Z.ZL)();case 2:return I=u.sent,u.abrupt("return",{token:I.data.token});case 4:case"end":return u.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),b=function(c){c.file.status==="done"&&l.setFieldsValue({imgSourceUrl:"https://labaimg.wuliangit.com/"+c.file.response.key})},V=function(){var c=l.getFieldValue("imgSourceUrl");c==null&&l.setFieldsValue({imgSourceUrl:U}),t.onSubmit(l.getFieldsValue())};return(0,r.jsx)(R.Z,{title:"\u4FEE\u6539\u8F6E\u64AD\u56FE",closable:!1,getContainer:!1,visible:t.updateModalVisible,onCancel:function(){return t.onCancel()},okText:"\u63D0\u4EA4",onOk:V,children:(0,r.jsxs)(p.Z,{name:"basic",form:l,labelCol:{span:5},wrapperCol:{span:16},initialValues:(0,C.Z)({},t.values),onFinish:t.onSubmit,onFinishFailed:function(){return t.onCancel()},autoComplete:"off",children:[(0,r.jsx)(p.Z.Item,{label:"id",name:"id",hidden:!0,rules:[{required:!0,message:"Please input your username!"}],children:(0,r.jsx)(E.Z,{})}),(0,r.jsx)(p.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"Please input your username!"}],children:(0,r.jsx)(E.Z,{})}),(0,r.jsx)(p.Z.Item,{label:"\u8DF3\u8F6C\u5730\u5740",name:"jumpUrl",rules:[{required:!0,message:"Please input your password!"}],children:(0,r.jsx)(W,{rows:4})}),(0,r.jsx)(p.Z.Item,{label:"\u542F\u7528\u72B6\u6001",valuePropName:"checked",name:"enable",children:(0,r.jsx)(G.Z,{defaultChecked:T})}),(0,r.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u56FE\u7247",valuePropName:"imgSourceUrl",name:"imgSourceUrl",children:(0,r.jsx)(z.Z,{name:"file",listType:"picture",maxCount:1,defaultFileList:x(),action:"https://up-z2.qiniup.com",data:A,beforeUpload:g.bind(K),onChange:b,children:(0,r.jsx)(L.Z,{children:"\u4E0A\u4F20"})})})]})})},J=H,Q=function(){var y=(0,F.Z)(d().mark(function t(s){var i;return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=f.default.loading("\u63D0\u4EA4\u4E2D"),a.prev=1,console.log("handleAdd-----",s),a.next=5,(0,Z.ON)((0,C.Z)({},s));case 5:return i(),f.default.success("\u63D0\u4EA4\u6210\u529F"),a.abrupt("return",!0);case 10:return a.prev=10,a.t0=a.catch(1),i(),f.default.error("\u63D0\u4EA4\u5931\u8D25"),a.abrupt("return",!1);case 15:case"end":return a.stop()}},t,null,[[1,10]])}));return function(s){return y.apply(this,arguments)}}(),X=function(){var y=(0,F.Z)(d().mark(function t(s){var i;return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=f.default.loading("\u63D0\u4EA4\u4E2D"),a.prev=1,a.next=4,(0,Z.Bt)((0,C.Z)({},s));case 4:return i(),f.default.success("\u63D0\u4EA4\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),i(),f.default.error("\u63D0\u4EA4\u5931\u8D25"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},t,null,[[1,9]])}));return function(s){return y.apply(this,arguments)}}(),Y=function(){var t=(0,S.useState)(!1),s=(0,j.Z)(t,2),i=s[0],l=s[1],a=(0,S.useState)(!1),U=(0,j.Z)(a,2),T=U[0],x=U[1],g=(0,S.useRef)(),A=(0,S.useState)(),b=(0,j.Z)(A,2),V=b[0],o=b[1],c=function(){var h=(0,F.Z)(d().mark(function u(m){var v;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return v=f.default.loading("\u6B63\u5728\u5220\u9664"),n.prev=1,n.next=4,(0,Z.qL)(m);case 4:return v(),f.default.success("\u5220\u9664\u6210\u529F"),g.current&&g.current.reload(),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),v(),f.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},u,null,[[1,10]])}));return function(m){return h.apply(this,arguments)}}(),I=[{title:"\u8F6E\u64AD\u540D\u79F0",dataIndex:"name",width:80},{title:"\u8F6E\u64AD\u56FE",dataIndex:"imgSourceUrl",hideInSearch:!0,width:220,renderText:function(u){return(0,r.jsx)(B.Z,{height:100,src:u})}},{title:"\u8DF3\u8F6C\u5730\u5740",dataIndex:"jumpUrl",hideInSearch:!0,valueType:"textarea",ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"enable",hideInForm:!0,valueEnum:{true:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},false:{text:"\u5173\u95ED",status:"Default"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(u,m){return[(0,r.jsx)("a",{onClick:function(){console.log("-------onClick",m),l(!0),x(!0),o(m)},children:"\u4FEE\u6539"},"config"),(0,r.jsx)($.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return c({id:m.id})},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{children:"\u5220\u9664"},"delete")})]}}];return(0,r.jsxs)(N.ZP,{children:[(0,r.jsx)(O.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:g,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(L.Z,{type:"primary",onClick:function(){l(!0),x(!1),o(void 0)},children:[(0,r.jsx)(M.Z,{})," \u65B0\u5EFA"]},"primary")]},request:Z.Ex,columns:I}),(0,r.jsx)(J,{onSubmit:function(){var h=(0,F.Z)(d().mark(function u(m){var v;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!T){n.next=6;break}return n.next=3,X(m);case 3:v=n.sent,n.next=9;break;case 6:return n.next=8,Q(m);case 8:v=n.sent;case 9:v&&(l(!1),g.current&&g.current.reload());case 10:case"end":return n.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),onCancel:function(){R.Z.destroyAll(),l(!1)},updateModalVisible:i,values:V||{},isUpdate:T})]})},w=Y}}]);
