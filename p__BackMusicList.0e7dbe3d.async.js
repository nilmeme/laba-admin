(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[650],{28147:function(ce,D,e){"use strict";e.r(D),e.d(D,{default:function(){return oe}});var he=e(71194),G=e(50146),me=e(57663),P=e(71577),ve=e(62350),H=e(75443),pe=e(12968),J=e(38629),y=e(57337),x=e(8870),ge=e(34792),v=e(48086),Z=e(3182),Q=e(94043),s=e.n(Q),Y=e(51042),I=e(67294),k=e(4743),q=e(80569),Fe=e(43185),N=e(65488),Ze=e(77576),_=e(85979),Ce=e(47673),$=e(4107),je=e(9715),p=e(92080),ye=e(43358),z=e(34041),ee=e(36571),ae=e(42443),a=e(85893),K=void 0,ne=z.Z.Option,te=function(l){var f=p.Z.useForm(),c=(0,y.Z)(f,1),u=c[0],n=l.values,U=n.url,E=n.status,b=n.icon,C=(0,I.useState)(!1),R=(0,y.Z)(C,2),L=R[0],O=R[1],T=function(){var d=(0,Z.Z)(s().mark(function r(F){var j,g,W;return s().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,ae.cv)({name:F,type:"back"});case 2:j=A.sent,g=j.data.map(function(X){return(0,a.jsx)(ne,{children:X.name},X.name)}),W=u.getFieldsValue(),O(g),setTimeout(function(){u.setFieldsValue((0,x.Z)({},W))},0);case 7:case"end":return A.stop()}},r)}));return function(F){return d.apply(this,arguments)}}(),B=function(){var d=(0,Z.Z)(s().mark(function r(){return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:T(void 0);case 1:case"end":return j.stop()}},r)}));return function(){return d.apply(this,arguments)}}(),M=function(){return[{uid:"1",name:"\u8BF7\u4E0A\u4F20\u80CC\u666F\u97F3\u4E50",status:"done",url:U}]},m=function(){return[{uid:"1",name:"\u8BF7\u4E0A\u4F20\u56FE\u6807",status:"done",url:b}]};l.isUpdate?(u.setFieldsValue((0,x.Z)({},l.values)),l.values.from==null&&u.setFieldsValue({from:void 0})):u.setFieldsValue({url:void 0,name:void 0,from:void 0,id:void 0,status:!1,group:void 0,icon:void 0});var i=function(){return!0},o=function(){var d=(0,Z.Z)(s().mark(function r(){var F;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,ee.ZL)();case 2:return F=g.sent,g.abrupt("return",{token:F.data.token});case 4:case"end":return g.stop()}},r)}));return function(){return d.apply(this,arguments)}}(),h=function(r){r.file.status==="done"&&u.setFieldsValue({url:"https://labaimg.wuliangit.com/"+r.file.response.key})},w=function(r){r.file.status==="done"&&u.setFieldsValue({icon:"https://labaimg.wuliangit.com/"+r.file.response.key})},t=function(){var r=u.getFieldValue("url");r==null&&u.setFieldsValue({url:U}),u.validateFields().then(function(){l.onSubmit(u.getFieldsValue())}).catch(function(F){console.log("\u63D0\u4EA4\u7684\u6570\u636E\u65E0\u6548:",F)})},fe=function(r){console.log("xxxxxxxasdfasdfasdf:",r)};return(0,a.jsx)(G.Z,{title:l.isUpdate?"\u4FEE\u6539\u80CC\u666F\u97F3":"\u65B0\u589E\u80CC\u666F\u97F3",closable:!1,getContainer:!1,visible:l.updateModalVisible,onCancel:function(){return l.onCancel()},okText:"\u63D0\u4EA4",onOk:t,children:(0,a.jsxs)(p.Z,{name:"basic",form:u,labelCol:{span:5},wrapperCol:{span:16},initialValues:(0,x.Z)({},l.values),onFinishFailed:fe,autoComplete:"off",children:[(0,a.jsx)(p.Z.Item,{label:"id",name:"id",hidden:!0,children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(p.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",warningOnly:!1}],children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(p.Z.Item,{label:"\u6765\u6E90",name:"from",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6765\u6E90"}],children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(p.Z.Item,{label:"\u5206\u7EC4",name:"group",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7EC4"}],children:(0,a.jsx)(z.Z,{showSearch:!0,defaultActiveFirstOption:!1,showArrow:!0,filterOption:!1,onSearch:T,onFocus:B,notFoundContent:null,getPopupContainer:function(r){return r.parentElement},children:L})}),(0,a.jsx)(p.Z.Item,{label:"\u542F\u7528\u72B6\u6001",valuePropName:"checked",name:"status",children:(0,a.jsx)(_.Z,{defaultChecked:E})}),(0,a.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u97F3\u9891",valuePropName:"url",name:"url",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u97F3\u9891"}],children:(0,a.jsx)(N.Z,{name:"file",maxCount:1,defaultFileList:M(),action:"https://up-z2.qiniup.com",data:o,beforeUpload:i.bind(K),onChange:h,children:(0,a.jsx)(P.Z,{children:"\u4E0A\u4F20"})})}),(0,a.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u56FE\u6807",valuePropName:"icon",name:"icon",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u6807"}],children:(0,a.jsx)(N.Z,{name:"file",listType:"picture",maxCount:1,defaultFileList:m(),action:"https://up-z2.qiniup.com",data:o,beforeUpload:i.bind(K),onChange:w,children:(0,a.jsx)(P.Z,{children:"\u4E0A\u4F20"})})})]})})},re=te,ue=e(81540),le=e.n(ue),V=e(94135),se=function(){var S=(0,Z.Z)(s().mark(function l(f){var c;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=v.default.loading("\u63D0\u4EA4\u4E2D"),n.prev=1,console.log("handleAdd-----",f),n.next=5,(0,V.aX)((0,x.Z)({},f));case 5:return c(),v.default.success("\u63D0\u4EA4\u6210\u529F"),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),c(),v.default.error("\u63D0\u4EA4\u5931\u8D25"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},l,null,[[1,10]])}));return function(f){return S.apply(this,arguments)}}(),ie=function(){var S=(0,Z.Z)(s().mark(function l(f){var c;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=v.default.loading("\u63D0\u4EA4\u4E2D"),n.prev=1,n.next=4,(0,V.Rd)((0,x.Z)({},f));case 4:return c(),v.default.success("\u63D0\u4EA4\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),c(),v.default.error("\u63D0\u4EA4\u5931\u8D25"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},l,null,[[1,9]])}));return function(f){return S.apply(this,arguments)}}(),de=function(){var l=(0,I.useState)(!1),f=(0,y.Z)(l,2),c=f[0],u=f[1],n=(0,I.useState)(!1),U=(0,y.Z)(n,2),E=U[0],b=U[1],C=(0,I.useRef)(),R=(0,I.useState)(),L=(0,y.Z)(R,2),O=L[0],T=L[1],B=function(){var m=(0,Z.Z)(s().mark(function i(o){var h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h=v.default.loading("\u6B63\u5728\u5220\u9664"),t.prev=1,t.next=4,(0,V.lC)(o);case 4:return h(),v.default.success("\u5220\u9664\u6210\u529F"),C.current&&C.current.reload(),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(1),h(),v.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),t.abrupt("return",!1);case 15:case"end":return t.stop()}},i,null,[[1,10]])}));return function(o){return m.apply(this,arguments)}}(),M=[{title:"\u56FE\u6807",dataIndex:"icon",hideInSearch:!0,width:60,renderText:function(i){return(0,a.jsx)(J.Z,{height:40,src:i})}},{title:"\u80CC\u666F\u97F3\u540D\u79F0",dataIndex:"name",width:120},{title:"\u6765\u6E90",dataIndex:"from",width:120},{title:"\u97F3\u9891\u6587\u4EF6",dataIndex:"url",hideInSearch:!0,valueType:"textarea",width:330,renderText:function(i){return(0,a.jsx)(le(),{src:i,controls:!0})}},{title:"\u5206\u7EC4",dataIndex:"group",width:120},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{true:{text:"\u542F\u7528",status:"Processing"},false:{text:"\u5173\u95ED",status:"Default"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(i,o){return[(0,a.jsx)("a",{onClick:function(){u(!0),b(!0),console.log("setCurrentRow:"+o.from),T(o)},children:"\u4FEE\u6539"},"config"),(0,a.jsx)(H.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return B({id:o.id})},okText:"\u662F",cancelText:"\u5426",children:(0,a.jsx)("a",{children:"\u5220\u9664"},"delete")})]}}];return(0,a.jsxs)(k.ZP,{children:[(0,a.jsx)(q.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:C,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(P.Z,{type:"primary",onClick:function(){u(!0),b(!1),T(void 0)},children:[(0,a.jsx)(Y.Z,{})," \u65B0\u5EFA"]},"primary")]},request:V.mp,columns:M}),(0,a.jsx)(re,{onSubmit:function(){var m=(0,Z.Z)(s().mark(function i(o){var h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!E){t.next=6;break}return t.next=3,ie(o);case 3:h=t.sent,t.next=9;break;case 6:return t.next=8,se(o);case 8:h=t.sent;case 9:h&&(u(!1),C.current&&C.current.reload());case 10:case"end":return t.stop()}},i)}));return function(i){return m.apply(this,arguments)}}(),onCancel:function(){G.Z.destroyAll(),u(!1)},updateModalVisible:c,values:O||{},isUpdate:E})]})},oe=de}}]);
