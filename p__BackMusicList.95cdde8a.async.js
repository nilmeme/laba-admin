(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[650],{28147:function(oe,D,e){"use strict";e.r(D),e.d(D,{default:function(){return de}});var ce=e(71194),G=e(50146),fe=e(57663),P=e(71577),he=e(62350),X=e(75443),ve=e(12968),H=e(38629),y=e(57337),A=e(8870),me=e(34792),m=e(48086),F=e(3182),J=e(94043),s=e.n(J),Q=e(51042),S=e(67294),Y=e(4743),k=e(80569),pe=e(43185),N=e(65488),ge=e(77576),q=e(85979),Fe=e(47673),$=e(4107),Ze=e(9715),p=e(92080),Ce=e(43358),z=e(34041),_=e(36571),ee=e(42443),n=e(85893),K=void 0,ne=z.Z.Option,ae=function(u){var c=p.Z.useForm(),f=(0,y.Z)(c,1),l=f[0],a=u.values,I=a.url,b=a.status,V=a.icon,Z=(0,S.useState)(),R=(0,y.Z)(Z,2),L=R[0],O=R[1],U=function(){var d=(0,F.Z)(s().mark(function r(j){var C,g;return s().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,ee.cv)({name:j,type:"back"});case 2:C=T.sent,g=C.data.map(function(W){return(0,n.jsx)(ne,{children:W.name},W.name)}),O(g);case 5:case"end":return T.stop()}},r)}));return function(j){return d.apply(this,arguments)}}(),B=function(){var d=(0,F.Z)(s().mark(function r(){return s().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:U(void 0);case 1:case"end":return C.stop()}},r)}));return function(){return d.apply(this,arguments)}}(),M=function(){return[{uid:"1",name:"\u793A\u4F8B\u97F3\u9891",status:"done",url:I}]},v=function(){return[{uid:"1",name:"\u56FE\u6807",status:"done",url:V}]};u.isUpdate?l.setFieldsValue((0,A.Z)({},u.values)):l.setFieldsValue({url:void 0,name:void 0,id:void 0,status:!1,group:void 0,icon:void 0});var i=function(){return!0},o=function(){var d=(0,F.Z)(s().mark(function r(){var j;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,_.ZL)();case 2:return j=g.sent,g.abrupt("return",{token:j.data.token});case 4:case"end":return g.stop()}},r)}));return function(){return d.apply(this,arguments)}}(),h=function(r){r.file.status==="done"&&l.setFieldsValue({url:"https://labaimg.wuliangit.com/"+r.file.response.key})},w=function(r){r.file.status==="done"&&l.setFieldsValue({icon:"https://labaimg.wuliangit.com/"+r.file.response.key})},t=function(){var r=l.getFieldValue("url");r==null&&l.setFieldsValue({url:I}),u.onSubmit(l.getFieldsValue())};return(0,n.jsx)(G.Z,{title:"\u4FEE\u6539\u80CC\u666F\u97F3",closable:!1,getContainer:!1,visible:u.updateModalVisible,onCancel:function(){return u.onCancel()},okText:"\u63D0\u4EA4",onOk:t,children:(0,n.jsxs)(p.Z,{name:"basic",form:l,labelCol:{span:5},wrapperCol:{span:16},initialValues:(0,A.Z)({},u.values),onFinish:u.onSubmit,onFinishFailed:function(){return u.onCancel()},autoComplete:"off",children:[(0,n.jsx)(p.Z.Item,{label:"id",name:"id",hidden:!0,rules:[{required:!0,message:""}],children:(0,n.jsx)($.Z,{})}),(0,n.jsx)(p.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],children:(0,n.jsx)($.Z,{})}),(0,n.jsx)(p.Z.Item,{label:"\u6765\u6E90",name:"from",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6765\u6E90"}],children:(0,n.jsx)($.Z,{})}),(0,n.jsx)(p.Z.Item,{label:"\u5206\u7EC4",name:"group",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u503C"}],children:(0,n.jsx)(z.Z,{showSearch:!0,defaultActiveFirstOption:!1,showArrow:!0,filterOption:!1,onSearch:U,onFocus:B,notFoundContent:null,getPopupContainer:function(r){return r.parentElement},children:L})}),(0,n.jsx)(p.Z.Item,{label:"\u542F\u7528\u72B6\u6001",valuePropName:"checked",name:"status",children:(0,n.jsx)(q.Z,{defaultChecked:b})}),(0,n.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u97F3\u9891",valuePropName:"sourceUrl",name:"sourceUrl",children:(0,n.jsx)(N.Z,{name:"file",maxCount:1,defaultFileList:M(),action:"https://up-z2.qiniup.com",data:o,beforeUpload:i.bind(K),onChange:h,children:(0,n.jsx)(P.Z,{children:"\u4E0A\u4F20"})})}),(0,n.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u56FE\u6807",valuePropName:"icon",name:"icon",children:(0,n.jsx)(N.Z,{name:"file",listType:"picture",maxCount:1,defaultFileList:v(),action:"https://up-z2.qiniup.com",data:o,beforeUpload:i.bind(K),onChange:w,children:(0,n.jsx)(P.Z,{children:"\u4E0A\u4F20"})})})]})})},te=ae,re=e(81540),ue=e.n(re),E=e(94135),le=function(){var x=(0,F.Z)(s().mark(function u(c){var f;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f=m.default.loading("\u63D0\u4EA4\u4E2D"),a.prev=1,console.log("handleAdd-----",c),a.next=5,(0,E.aX)((0,A.Z)({},c));case 5:return f(),m.default.success("\u63D0\u4EA4\u6210\u529F"),a.abrupt("return",!0);case 10:return a.prev=10,a.t0=a.catch(1),f(),m.default.error("\u63D0\u4EA4\u5931\u8D25"),a.abrupt("return",!1);case 15:case"end":return a.stop()}},u,null,[[1,10]])}));return function(c){return x.apply(this,arguments)}}(),se=function(){var x=(0,F.Z)(s().mark(function u(c){var f;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f=m.default.loading("\u63D0\u4EA4\u4E2D"),a.prev=1,a.next=4,(0,E.Rd)((0,A.Z)({},c));case 4:return f(),m.default.success("\u63D0\u4EA4\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),f(),m.default.error("\u63D0\u4EA4\u5931\u8D25"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},u,null,[[1,9]])}));return function(c){return x.apply(this,arguments)}}(),ie=function(){var u=(0,S.useState)(!1),c=(0,y.Z)(u,2),f=c[0],l=c[1],a=(0,S.useState)(!1),I=(0,y.Z)(a,2),b=I[0],V=I[1],Z=(0,S.useRef)(),R=(0,S.useState)(),L=(0,y.Z)(R,2),O=L[0],U=L[1],B=function(){var v=(0,F.Z)(s().mark(function i(o){var h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h=m.default.loading("\u6B63\u5728\u5220\u9664"),t.prev=1,t.next=4,(0,E.lC)(o);case 4:return h(),m.default.success("\u5220\u9664\u6210\u529F"),Z.current&&Z.current.reload(),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(1),h(),m.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),t.abrupt("return",!1);case 15:case"end":return t.stop()}},i,null,[[1,10]])}));return function(o){return v.apply(this,arguments)}}(),M=[{title:"\u56FE\u6807",dataIndex:"icon",hideInSearch:!0,width:60,renderText:function(i){return(0,n.jsx)(H.Z,{height:40,src:i})}},{title:"\u80CC\u666F\u97F3\u540D\u79F0",dataIndex:"name",width:120},{title:"\u6765\u6E90",dataIndex:"from",width:120},{title:"\u97F3\u9891\u6587\u4EF6",dataIndex:"url",hideInSearch:!0,valueType:"textarea",width:330,renderText:function(i){return(0,n.jsx)(ue(),{src:i,controls:!0})}},{title:"\u5206\u7EC4",dataIndex:"group",width:120},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{true:{text:"\u542F\u7528",status:"Processing"},false:{text:"\u5173\u95ED",status:"Default"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(i,o){return[(0,n.jsx)("a",{onClick:function(){console.log("-------onClick",o),l(!0),V(!0),U(o)},children:"\u4FEE\u6539"},"config"),(0,n.jsx)(X.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return B({id:o.id})},okText:"\u662F",cancelText:"\u5426",children:(0,n.jsx)("a",{children:"\u5220\u9664"},"delete")})]}}];return(0,n.jsxs)(Y.ZP,{children:[(0,n.jsx)(k.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:Z,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,n.jsxs)(P.Z,{type:"primary",onClick:function(){l(!0),V(!1),U(void 0)},children:[(0,n.jsx)(Q.Z,{})," \u65B0\u5EFA"]},"primary")]},request:E.mp,columns:M}),(0,n.jsx)(te,{onSubmit:function(){var v=(0,F.Z)(s().mark(function i(o){var h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!b){t.next=6;break}return t.next=3,se(o);case 3:h=t.sent,t.next=9;break;case 6:return t.next=8,le(o);case 8:h=t.sent;case 9:h&&(l(!1),Z.current&&Z.current.reload());case 10:case"end":return t.stop()}},i)}));return function(i){return v.apply(this,arguments)}}(),onCancel:function(){G.Z.destroyAll(),l(!1)},updateModalVisible:f,values:O||{},isUpdate:b})]})},de=ie}}]);
