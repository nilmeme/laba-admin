(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[650],{28147:function(fe,w,e){"use strict";e.r(w),e.d(w,{default:function(){return de}});var ce=e(71194),D=e(50146),he=e(57663),P=e(71577),ve=e(62350),X=e(75443),me=e(12968),H=e(38629),y=e(57337),A=e(8870),pe=e(34792),m=e(48086),Z=e(3182),J=e(94043),s=e.n(J),Q=e(51042),x=e(67294),Y=e(4743),k=e(80569),ge=e(43185),G=e(65488),Fe=e(77576),q=e(85979),Ze=e(47673),$=e(4107),Ce=e(9715),p=e(92080),je=e(43358),N=e(34041),_=e(36571),ee=e(42443),a=e(85893),z=void 0,ae=N.Z.Option,ne=function(l){var f=p.Z.useForm(),c=(0,y.Z)(f,1),u=c[0],n=l.values,S=n.url,V=n.status,b=n.icon,C=(0,x.useState)(!1),R=(0,y.Z)(C,2),L=R[0],K=R[1],U=function(){var d=(0,Z.Z)(s().mark(function r(g){var j,F;return s().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,ee.cv)({name:g,type:"back"});case 2:j=T.sent,F=j.data.map(function(W){return(0,a.jsx)(ae,{children:W.name},W.name)});case 4:case"end":return T.stop()}},r)}));return function(g){return d.apply(this,arguments)}}(),O=function(){var d=(0,Z.Z)(s().mark(function r(){return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:U(void 0);case 1:case"end":return j.stop()}},r)}));return function(){return d.apply(this,arguments)}}(),B=function(){return[{uid:"1",name:"\u8BF7\u4E0A\u4F20\u80CC\u666F\u97F3\u4E50",status:"done",url:S}]},v=function(){return[{uid:"1",name:"\u8BF7\u4E0A\u4F20\u56FE\u6807",status:"done",url:b}]};l.isUpdate?(u.setFieldsValue((0,A.Z)({},l.values)),l.values.from==null&&u.setFieldsValue({from:void 0})):u.setFieldsValue({url:void 0,name:void 0,from:void 0,id:void 0,status:!1,group:void 0,icon:void 0});var i=function(){return!0},o=function(){var d=(0,Z.Z)(s().mark(function r(){var g;return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,_.ZL)();case 2:return g=F.sent,F.abrupt("return",{token:g.data.token});case 4:case"end":return F.stop()}},r)}));return function(){return d.apply(this,arguments)}}(),h=function(r){r.file.status==="done"&&u.setFieldsValue({url:"https://labaimg.wuliangit.com/"+r.file.response.key})},M=function(r){r.file.status==="done"&&u.setFieldsValue({icon:"https://labaimg.wuliangit.com/"+r.file.response.key})},t=function(){var r=u.getFieldValue("url");r==null&&u.setFieldsValue({url:S}),u.validateFields().then(function(){l.onSubmit(u.getFieldsValue())}).catch(function(g){console.log("\u63D0\u4EA4\u7684\u6570\u636E\u65E0\u6548:",g)})},oe=function(r){console.log("xxxxxxxasdfasdfasdf:",r)};return(0,a.jsx)(D.Z,{title:"\u4FEE\u6539\u80CC\u666F\u97F3",closable:!1,getContainer:!1,visible:l.updateModalVisible,onCancel:function(){return l.onCancel()},okText:"\u63D0\u4EA4",onOk:t,children:(0,a.jsxs)(p.Z,{name:"basic",form:u,labelCol:{span:5},wrapperCol:{span:16},initialValues:(0,A.Z)({},l.values),onFinishFailed:oe,autoComplete:"off",children:[(0,a.jsx)(p.Z.Item,{label:"id",name:"id",hidden:!0,children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(p.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",warningOnly:!1}],children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(p.Z.Item,{label:"\u6765\u6E90",name:"from",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6765\u6E90"}],children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(p.Z.Item,{label:"\u5206\u7EC4",name:"group",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7EC4"}],children:(0,a.jsx)(N.Z,{showSearch:!0,defaultActiveFirstOption:!1,showArrow:!0,filterOption:!1,onSearch:U,onFocus:O,notFoundContent:null,getPopupContainer:function(r){return r.parentElement},children:L})}),(0,a.jsx)(p.Z.Item,{label:"\u542F\u7528\u72B6\u6001",valuePropName:"checked",name:"status",children:(0,a.jsx)(q.Z,{defaultChecked:V})}),(0,a.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u97F3\u9891",valuePropName:"url",name:"url",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u97F3\u9891"}],children:(0,a.jsx)(G.Z,{name:"file",maxCount:1,defaultFileList:B(),action:"https://up-z2.qiniup.com",data:o,beforeUpload:i.bind(z),onChange:h,children:(0,a.jsx)(P.Z,{children:"\u4E0A\u4F20"})})}),(0,a.jsx)(p.Z.Item,{label:"\u4E0A\u4F20\u56FE\u6807",valuePropName:"icon",name:"icon",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u6807"}],children:(0,a.jsx)(G.Z,{name:"file",listType:"picture",maxCount:1,defaultFileList:v(),action:"https://up-z2.qiniup.com",data:o,beforeUpload:i.bind(z),onChange:M,children:(0,a.jsx)(P.Z,{children:"\u4E0A\u4F20"})})})]})})},te=ne,re=e(81540),ue=e.n(re),E=e(94135),le=function(){var I=(0,Z.Z)(s().mark(function l(f){var c;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=m.default.loading("\u63D0\u4EA4\u4E2D"),n.prev=1,console.log("handleAdd-----",f),n.next=5,(0,E.aX)((0,A.Z)({},f));case 5:return c(),m.default.success("\u63D0\u4EA4\u6210\u529F"),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),c(),m.default.error("\u63D0\u4EA4\u5931\u8D25"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},l,null,[[1,10]])}));return function(f){return I.apply(this,arguments)}}(),se=function(){var I=(0,Z.Z)(s().mark(function l(f){var c;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=m.default.loading("\u63D0\u4EA4\u4E2D"),n.prev=1,n.next=4,(0,E.Rd)((0,A.Z)({},f));case 4:return c(),m.default.success("\u63D0\u4EA4\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),c(),m.default.error("\u63D0\u4EA4\u5931\u8D25"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},l,null,[[1,9]])}));return function(f){return I.apply(this,arguments)}}(),ie=function(){var l=(0,x.useState)(!1),f=(0,y.Z)(l,2),c=f[0],u=f[1],n=(0,x.useState)(!1),S=(0,y.Z)(n,2),V=S[0],b=S[1],C=(0,x.useRef)(),R=(0,x.useState)(),L=(0,y.Z)(R,2),K=L[0],U=L[1],O=function(){var v=(0,Z.Z)(s().mark(function i(o){var h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h=m.default.loading("\u6B63\u5728\u5220\u9664"),t.prev=1,t.next=4,(0,E.lC)(o);case 4:return h(),m.default.success("\u5220\u9664\u6210\u529F"),C.current&&C.current.reload(),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(1),h(),m.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),t.abrupt("return",!1);case 15:case"end":return t.stop()}},i,null,[[1,10]])}));return function(o){return v.apply(this,arguments)}}(),B=[{title:"\u56FE\u6807",dataIndex:"icon",hideInSearch:!0,width:60,renderText:function(i){return(0,a.jsx)(H.Z,{height:40,src:i})}},{title:"\u80CC\u666F\u97F3\u540D\u79F0",dataIndex:"name",width:120},{title:"\u6765\u6E90",dataIndex:"from",width:120},{title:"\u97F3\u9891\u6587\u4EF6",dataIndex:"url",hideInSearch:!0,valueType:"textarea",width:330,renderText:function(i){return(0,a.jsx)(ue(),{src:i,controls:!0})}},{title:"\u5206\u7EC4",dataIndex:"group",width:120},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{true:{text:"\u542F\u7528",status:"Processing"},false:{text:"\u5173\u95ED",status:"Default"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(i,o){return[(0,a.jsx)("a",{onClick:function(){u(!0),b(!0),console.log("setCurrentRow:"+o.from),U(o)},children:"\u4FEE\u6539"},"config"),(0,a.jsx)(X.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return O({id:o.id})},okText:"\u662F",cancelText:"\u5426",children:(0,a.jsx)("a",{children:"\u5220\u9664"},"delete")})]}}];return(0,a.jsxs)(Y.ZP,{children:[(0,a.jsx)(k.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:C,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(P.Z,{type:"primary",onClick:function(){u(!0),b(!1),U(void 0)},children:[(0,a.jsx)(Q.Z,{})," \u65B0\u5EFA"]},"primary")]},request:E.mp,columns:B}),(0,a.jsx)(te,{onSubmit:function(){var v=(0,Z.Z)(s().mark(function i(o){var h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!V){t.next=6;break}return t.next=3,se(o);case 3:h=t.sent,t.next=9;break;case 6:return t.next=8,le(o);case 8:h=t.sent;case 9:h&&(u(!1),C.current&&C.current.reload());case 10:case"end":return t.stop()}},i)}));return function(i){return v.apply(this,arguments)}}(),onCancel:function(){D.Z.destroyAll(),u(!1)},updateModalVisible:c,values:K||{},isUpdate:V})]})},de=ie}}]);
